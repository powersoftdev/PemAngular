
<app-sidebar></app-sidebar>

<div class="page-wrapper">

  <!-- Page Content -->
  <div class="content container-fluid">

      <!-- Page Header -->
      <div class="row">
          <div class="col-md-12">
              <div class="page-head-box">
                  <h3>Bank</h3>
                  <nav aria-label="breadcrumb">
                      <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a routerLink="/dashboard">Dashboard</a></li>
                          <li class="breadcrumb-item active" aria-current="page">Bank</li>
                      </ol>
                  </nav>
              </div>
          </div>
      </div>
      <!-- /Page Header -->

      <!-- Search Filter -->
      <div class="row filter-row">
          <div class="col-md-8"></div>
          <div class="col-md-4">
              <div class="add-emp-section">
                  <a id="add-bank-btn" class="btn btn-success btn-add-emp" data-bs-toggle="modal" data-bs-target="#add_Bank"
                      style="width: auto;"><i class="fas fa-plus"></i> Add
                      Bank</a>
              </div>
          </div>
      </div>
      <div class="col-md-8">
          <input class="form-control center me-2" type="search" [(ngModel)]="searchKey" name="search" 
          placeholder="Search" aria-label="Search"> <br>
        <button class="btn btn-primary" type="submit">Search</button>

      </div>
      <hr>

            <dx-data-grid
            
              id="gridContainer"
              [dataSource]="bankData"
              [remoteOperations]="false"
              [allowColumnReordering]="true"
              [rowAlternationEnabled]="true"
              [showBorders]="true"
              (onContentReady)="contentReady($event)"
              (onExporting)="onExporting($event)"

              >
                
              <dxo-header-filter [visible]="true"></dxo-header-filter>
              <dxo-group-panel [visible]="true"></dxo-group-panel>
                <dxo-scrolling mode="virtual"></dxo-scrolling>
                <dxi-column dataField="Action" [width]="100" [allowFiltering]="false" [allowSorting]="false"
                            cellTemplate="bankData"></dxi-column>
                <div *dxTemplate="let data of 'bankData'">
          
                  <a data-bs-toggle="modal" data-bs-target="#edit_Bank">
                    <i class="fas fa-edit editbtn"
                       (click)="editBank(data)"></i></a>
                  &nbsp;&nbsp;&nbsp;
                  <a href="#" data-bs-toggle="modal" data-bs-target="#delete_Bank">
                    <i class="fa fa-times deleteBtn"
                       aria-hidden="true" (click)="deleteData(data.data)"></i></a>
                </div>
          
                    <dxo-load-panel [enabled]="true"></dxo-load-panel>
                    
                  <dxo-filter-row [visible]="true"></dxo-filter-row>
                  <dxo-header-filter [visible]="true"></dxo-header-filter>
                  <dxo-group-panel [visible]="true"></dxo-group-panel>
                  <dxo-scrolling mode="virtual"></dxo-scrolling>
                  <dxo-editing
                  mode="row"
                  [allowUpdating]="true"
                  [allowDeleting]="true"
                  [useIcons]="true"
                ></dxo-editing>
                <dxi-column type="button" [width]="110">
                    <dxi-button name="edit" (click)="editBank"></dxi-button>
                    <dxi-button name="delete"></dxi-button>
                </dxi-column>
                
                    <dxo-paging [pageSize]="10"></dxo-paging>
                    <dxo-pager
                      [showPageSizeSelector]="true"
                      [allowedPageSizes]="[10, 25, 50, 100]"
                    ></dxo-pager>
                    <dxo-search-panel
                      [visible]="true"
                      [highlightCaseSensitive]="true"
                      
                    ></dxo-search-panel>
                    <dxo-group-panel [visible]="true"></dxo-group-panel>
                    <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
                    <dxo-export
                    [enabled]="true"
                    [formats]="['Excel']"
                    [allowExportSelectedData]="true"
                  ></dxo-export>
            
              <dxi-column dataField="companyId" dataType="string"></dxi-column>
              <dxi-column dataField="locationId" dataType="string"></dxi-column>

              <dxi-column dataField="description" dataType="string"></dxi-column>
              <dxi-column dataField="departmentId" dataType="string"></dxi-column>
              <dxi-column dataField="bankName" dataType="string"></dxi-column>
              <dxi-column dataField="bankAddress1" dataType="string"></dxi-column>
              <dxi-column dataField="bankAddress2" dataType="string"></dxi-column>
              <dxi-column dataField="bankCity" dataType="string"></dxi-column> 
              <dxi-column dataField="bankState" dataType="string"></dxi-column>
              <dxi-column dataField="bankZip" dataType="string"></dxi-column>
              <dxi-column dataField="bankCountry" dataType="string"></dxi-column>
              <dxi-column dataField="bankFax" dataType="string"></dxi-column>
              <dxi-column dataField="bankContactName" dataType="string"></dxi-column>
              <dxi-column dataField="bankEmail" dataType="string"></dxi-column>
              <dxi-column dataField="bankWebsite" dataType="string"></dxi-column>
              <dxi-column dataField="swiftCode" dataType="string"></dxi-column>
              <dxi-column dataField="routingCode" dataType="string"></dxi-column>
              <dxi-column dataField="currencyId" dataType="string"></dxi-column>

              <dxi-column dataField="currencyExchangeRate" dataType="string"></dxi-column>
              <dxi-column dataField="bankFax" dataType="string"></dxi-column>
              <dxi-column dataField="bankContactName" dataType="string"></dxi-column>
              <dxi-column dataField="bankEmail" dataType="string"></dxi-column>
              <dxi-column dataField="bankWebsite" dataType="string"></dxi-column>
              <dxi-column dataField="swiftCode" dataType="string"></dxi-column>
              <dxi-column dataField="routingCode" dataType="string"></dxi-column>
              <dxi-column dataField="currencyId" dataType="string"></dxi-column>
            
            


              
            </dx-data-grid>
            
        <!-- <div id="add_gradetype" class="modal custom-modal fade" role="dialog">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Add Bank</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <i class="fas fa-times" #closeBtn></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="BankForm">
                            <div class="form-group">
                                <label>Company Id<span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="companyId" type="text"
                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('companyId')?.invalid &&
                            (BankForm.get('companyId')?.dirty || BankForm.get('companyId')?.touched)}">
                                <div class="invalid-feedback">
                                    This field is required.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Location Id <span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="locationId" type="text"
                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('locationId')?.invalid &&
                            (BankForm.get('locationId')?.dirty || BankForm.get('locationId')?.touched)}">
                                <div class="invalid-feedback">
                                    This field is required.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Discription <span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="discription" type="text"
                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('discription')?.invalid &&
                            (BankForm.get('discription')?.dirty || BankForm.get('discription')?.touched)}">
                                <div class="invalid-feedback">
                                    This field is required.
                                </div>
                            </div>
                            <div class="submit-section">
                                <button class="btn btn-primary cancel-btn" data-bs-dismiss="modal"
                                    aria-label="Close">Cancel</button>
                                <button class="btn btn-primary submit-btn" (click)="Add()">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div> -->
         <!-- Add Bank Modal -->
         <div id="add_Bank" class="modal custom-modal fade" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content modal-lg">
                    <div class="modal-header modal-lg">
                        <h5 class="modal-title">Add Bank</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <i class="fas fa-times" #closeBtn></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="BankForm">
                            <div class="form-group">
                                <!-- <div class="contaner py-5">-->
                                <div class="row">
                                    <div class="col-md-12 mx-auto">
                                        <div class="form-group row">
                                            <div class="col-sm-4">
                                                <label>Bank Id <span class="text-danger">*</span></label>
                                                <input class="form-control" formControlName="bankId" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankId')?.invalid &&
                                                        (BankForm.get('bankId')?.dirty || BankForm.get('bankId')?.touched)}">
                                                <div class="invalid-feedback">
                                                    This field is required.
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Account Number</label>
                                                <input class="form-control" formControlName="bankAccountNumber"
                                                    type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankAccountNumber')?.invalid &&
                                                 (BankForm.get('bankAccountNumber')?.dirty || BankForm.get('bankAccountNumber')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Name <span class="text-danger">*</span></label>
                                                <input class="form-control" formControlName="bankName" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankName')?.invalid &&
                                                (BankForm.get('bankName')?.dirty || BankForm.get('bankName')?.touched)}">
                                                <div class="invalid-feedback">
                                                    This field is required.
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-sm-4">
                                                <label>Bank Address 1 <span class="text-danger">*</span></label>
                                                <input class="form-control" formControlName="bankAddress1" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankAddress1')?.invalid &&
                                                    (BankForm.get('bankAddress1')?.dirty || BankForm.get('bankAddress1')?.touched)}">
                                                <div class="invalid-feedback">
                                                    This field is required.
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Address 2 </label>
                                                <input class="form-control" formControlName="bankAddress2" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankAddress2')?.invalid &&
                                                    (BankForm.get('bankAddress2')?.dirty || BankForm.get('bankAddress2')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank City </label>
                                                <input class="form-control" formControlName="bankCity" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankCity')?.invalid &&
                                                    (BankForm.get('bankCity')?.dirty || BankForm.get('bankCity')?.touched)}">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-sm-4">
                                                <label>Bank State</label>
                                                <input class="form-control" formControlName="bankState" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankState')?.invalid &&
                                                    (BankForm.get('bankState')?.dirty || BankForm.get('bankState')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Zip </label>
                                                <input class="form-control" formControlName="bankZip" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankZip')?.invalid &&
                                                    (BankForm.get('bankZip')?.dirty || BankForm.get('bankZip')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Country </label>
                                                <input class="form-control" formControlName="bankCountry" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankCountry')?.invalid &&
                                                    (BankForm.get('bankCountry')?.dirty || BankForm.get('bankCountry')?.touched)}">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-sm-4">
                                                <label>Bank Phone </label>
                                                <input class="form-control" formControlName="bankPhone" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankPhone')?.invalid &&
                                                    (BankForm.get('bankPhone')?.dirty || BankForm.get('bankPhone')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Fax </label>
                                                <input class="form-control" formControlName="bankFax" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankFax')?.invalid &&
                                                    (BankForm.get('bankFax')?.dirty || BankForm.get('bankFax')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Contact Name </label>
                                                <input class="form-control" formControlName="bankContactName"
                                                    type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankContactName')?.invalid &&
                                                (BankForm.get('bankContactName')?.dirty || BankForm.get('bankContactName')?.touched)}">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-sm-4">
                                                <label>Bank Email </label>
                                                <input class="form-control" formControlName="bankEmail" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankEmail')?.invalid &&
                                                    (BankForm.get('bankEmail')?.dirty || BankForm.get('bankEmail')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Bank Website </label>
                                                <input class="form-control" formControlName="bankWebsite" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('bankWebsite')?.invalid &&
                                                    (BankForm.get('bankWebsite')?.dirty || BankForm.get('bankWebsite')?.touched)}">
                                            </div>
                                            <div class="col-sm-4">
                                                <label>Notes </label>
                                                <input class="form-control" formControlName="notes" type="text"
                                                    [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('notes')?.invalid &&
                                                    (BankForm.get('notes')?.dirty || BankForm.get('notes')?.touched)}">
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-sm-4">
                                                    <label>Curent Pay Cheque Date </label>
                                                    <input class="form-control" formControlName="chequeDate" type="text"
                                                        [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('chequeDate')?.invalid &&
                                                    (BankForm.get('chequeDate')?.dirty || BankForm.get('chequeDate')?.touched)}">
                                                </div>
                                                <div class="col-sm-4">
                                                    <label>Current Pay Cheque No </label>
                                                    <input class="form-control" formControlName="chequeNo" type="text"
                                                        [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('chequeNo')?.invalid &&
                                                    (BankForm.get('chequeNo')?.dirty || BankForm.get('chequeNo')?.touched)}">
                                                </div>
                                                <div class="col-sm-4">
                                                    <label>Name of First Signatory </label>
                                                    <input class="form-control" formControlName="firstSign" type="text"
                                                        [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('firstSign')?.invalid &&
                                                    (BankForm.get('firstSign')?.dirty || BankForm.get('firstSign')?.touched)}">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-sm-4">
                                                    <label>Designation Of First Signatory </label>
                                                    <input class="form-control" formControlName="firstDesign"
                                                        type="text"
                                                        [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('firstDesign')?.invalid &&
                                                    (BankForm.get('firstDesign')?.dirty || BankForm.get('firstDesign')?.touched)}">
                                                </div>
                                                <div class="col-sm-4">
                                                    <label>Name Of Second Signatory </label>
                                                    <input class="form-control" formControlName="secondSign" type="text"
                                                        [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('secondSign')?.invalid &&
                                                    (BankForm.get('secondSign')?.dirty || BankForm.get('secondSign')?.touched)}">
                                                </div>
                                                <div class="col-sm-4">
                                                    <label>Designation Of Second Signatory </label>
                                                    <input class="form-control" formControlName="secondDesign"
                                                        type="text"
                                                        [ngClass]="{'form-control': true, 'is-invalid': BankForm.get('secondDesign')?.invalid &&
                                                    (BankForm.get('secondDesign')?.dirty || BankForm.get('secondDesign')?.touched)}">
                                                </div>
                                            </div>
                                            <div class="submit-section">
                                                <button class="btn btn-danger cancel-btn" data-bs-dismiss="modal"
                                                    aria-label="Close">Cancel</button>
                                                <button class="btn btn-success submit-btn"
                                                    (click)="Add()">Submit</button>
                                            </div>

                                        </div>
                                        <!-- </div>-->
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>



        <!-- Edit  -->
        <div id="edit_gradetype" class="modal custom-modal fade" role="dialog">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Edit Bank</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <i class="fas fa-times" #closeupdatebtn></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="BankForm">

                            <div class="form-group">
                                <label>CompanyId <span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="companyId" type="text">

                            </div>
                            <div class="form-group">
                                <label>Location Id  <span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="locationId" type="text">
                            </div>
                            <div class="form-group">
                                <label>Discription   <span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="discription" type="text">
                            </div>
                            <div class="form-group">
                                <label>Department Id  <span class="text-danger">*</span></label>
                                <input class="form-control" formControlName="departmentId" type="text">
                            </div>
                            <div class="submit-section">
                                <button class="btn btn-primary cancel-btn" data-bs-dismiss="modal"
                                    aria-label="Close">Cancel</button>

                                <button class="btn btn-primary submit-btn" (click)="Update()">Update</button>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit -->

          <!-- Delete Bank Modal -->
          <div class="modal custom-modal fade" id="delete_gradetype" role="dialog">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">

                    <div class="modal-body">
                        <div class="form-header">
                            <h3>Delete Bank</h3>
                            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                <i class="fas fa-times" #closedeletebtn></i>
                            </button>
                            <p>Are you sure want to delete?</p>
                        </div>
                        <div class="modal-btn delete-action">
                            <div class="row">
                                <div class="col-6">

                                    <a class="btn btn-primary continue-btn"
                                        (click)="Delete(bankData.companyId)">Delete</a>


                                </div>
                                <div class="col-6">
                                    <a href="javascript:void(0);" data-bs-dismiss="modal"
                                        class="btn btn-primary cancel-btn">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
